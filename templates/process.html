<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Process Creation Page</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
		
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.18/css/bootstrap-select.min.css" />
	         
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script  type="text/javaScript" src=" https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.18/js/bootstrap-select.min.js"></script>




        <style>
            #wrapper {
  overflow-x: hidden;
}
a{
    text-decoration: none;
    color:rgb(253, 250, 250);
}
#sidebar-wrapper {
  min-height: 100vh;
  margin-left: -16rem;
  transition: margin 0.25s ease-out;
}

#sidebar-wrapper .sidebar-heading {
  padding: 0.875rem 1.25rem;
  font-size: 1.2rem;
}

#sidebar-wrapper .list-group {
  width: 16rem;
}

#page-content-wrapper {
  min-width: 100vw;
}

body.sb-sidenav-toggled #wrapper #sidebar-wrapper {
  margin-left: 0;
}

@media (min-width: 768px) {
  #sidebar-wrapper {
    margin-left: 0;
  }


  #page-content-wrapper {
    min-width: 0;
    width: 100%;
  }

  body.sb-sidenav-toggled #wrapper #sidebar-wrapper {
    margin-left: -16rem;
  }
}

.btn {
padding: 10px 16px;
background-color: #ada7a7;
border: #080808;
cursor: pointer;
font-size: 20px;
}
                    
                    
.active, .btn:hover {
        background-color: rgb(18, 19, 18);
        color: white;
                    }


        </style>
    </head>
    <body>
        <div class="d-flex" id="wrapper">
            <div id="page-content-wrapper">
                <!-- Top navigation-->
                <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom shadow-sm">
                  <div class="container-fluid">
                      
                    <div id="myDIV" >
                      <button class="btn btn-primary" ><a href='./hrhomepage'><i class="fa fa-home" aria-hidden="true">Home</i> </a></button>
                    </div>
                  </div>
              </nav>
                <!-- Page content-->
            </div>
            </div>
                <div class="container-fluid">
                    
                    <h4 class="mt-4 text-center">New Process Setup</h4>
                    <hr>
                    <div class="row justify-content-evenly mt-4">
               
                    <h4 class="mt-4 text-center">Basic Information</h4>  
                        
                      

                    <div class="row justify-content-around mt-2" style="padding-left:15%">
                     
                    <div class="col-lg-6"  >
                    <div class="col">
                        <h5 class="xs-2 sm-2 text-left">Process Information</h5>
                      <!-- <div class="col-sm-8 col-10 mb-1">
                        <label for="client_name" class="form-label">Client Name</label>
                        <input type="text"  class="form-control shadow-sm"  name="client_name" required id="client_name" placeholder="Client Name" />
                      </div> -->
                      <div class="col-sm-8 col-10 mb-1">
                        <label for="process_name" class="form-label">Process Name</label>
                        <input type="text" class="form-control shadow-sm" name="process_name" required id="process_name" placeholder="Process Name" />
                      </div>  
                      <div class="col-sm-8 col-10 mb-1">
                        <label for="ops_manager" class="form-label">OPS Manager</label>
                        <select class="form-control shadow-sm" name="ops_manager" id="ops_manager">
                         <option value="">Choose an Option</option>
                         {% if data is defined %}
                        {% for i in data %}
                      <option value="{{i[0]}}">{{i[0]}}</option>
                            {% endfor %}
                            {% endif %}
                        
                        </select>
                      </div>
                    </div> 
                    <div class="col-sm-8 col-10 mb-1">
                      <label for="target_date" class="form-label">Target Date</label>
                      <input type="date" class="form-control shadow-sm" name="target_date" id="target_date"  />
                    </div>   
                  </div>   
                  <div class="col-lg-6">
                                        
                      <h5 class="xs-2 sm-2 text-left">Budget Information</h5>
                     
                      <div class="col">
                    <div class=" justify-content-around mt-3">
                      <!-- <div class="col-sm-8 col-10 mb-1">
                        <label for="client_name" class="form-label">Overall Budget</label>
                        <input type="text" class="form-control shadow-sm" onchange="overallbudget()" name="overall_budget" id="overall_budget"  placeholder="Ex : 5000000" />
                      </div>  -->
                      <div class="col-sm-8 col-10 mb-1">
                        <label for="client_name" class="form-label">Salary Budget</label>
                        <input type="text" class="form-control shadow-sm" name="salary_budget" onchange="salarybudget()" id="salary_budget" placeholder="Ex : 5000000" />
                      </div>                         
                      </div>  
                    </div>
                  </div>                                   
                    </div>
				</div>


                    <div class="justify-content-around mt-2"  style="padding-top:5%;padding-left:15%;">
					
                     <div class="row">
                      <div class="col-lg-5" >
                      <div class="col">
                        <h5 class="xs-2 sm-2 text-left" >Resource Requirement Information</h5>
                        <div class="col-sm-12">
                          
                          <select id="jobroles" name="jobroles"  class="multi_select3 col-sm-12"  multiple data-live-search="true">
                            {% for i in data2 %}
                            <option value="{{i[0]}}">{{i[0]}}</option>
                          {% endfor %}
                        </select>
                        <br>
                        <br>
                        <div class="col-sm-12">
                        <input type="submit" class="btn btn-primary " onclick="checkval()">
                      </div>
                        </div>  
                    
                  </div>
                </div>

                <div class="col-sm-12">
                  <div class="col-sm-6" >
                    <div class="col-sm-10 col-10 mb-1">
                  <input type="text" class="form-control shadow-sm" name="overall_budget" id="CSR" placeholder="CSR Head Count" style="display:none"/>
                </div>
                <div class="col-sm-10 col-10 mb-1">
                  <input type="text" class="form-control shadow-sm"  name="regular" id="regular" placeholder="Regular Head Count" style="display:none"/>
                </div>
                <div class="col-sm-10 col-10 mb-1">
                  <input type="text" class="form-control shadow-sm"  name="buffer" id="buffer" placeholder="Buffer Head Count" style="display:none"/>
                </div>
                <div class="col-sm-10 col-10 mb-1">
                  <input type="text" class="form-control shadow-sm" name="overall_budget" id="astmgr" placeholder="Assistant Manager Head Count" style="display:none" />
                </div>
                <div class="col-sm-10 col-10 mb-1">
                  <input type="text" class="form-control shadow-sm" name="overall_budget" id="mgr" placeholder="Manager Head Count" style="display:none"/>
                  
                </div>
                <div class="col-sm-10 col-10 mb-1"><input type="text" class="form-control shadow-sm" name="overall_budget" id="mis" placeholder="MIS Head Count" style="display:none"/>
                  <input type="text" class="form-control shadow-sm" name="overall_budget" id="Supervisor" placeholder="Sup Head Count" style="display:none"/>
                  
                </div>
                <div class="col-sm-10 col-10 mb-1">
                  <input type="text" class="form-control shadow-sm" name="overall_budget" id="mis" placeholder="MIS Head Count" style="display:none"/>
                  </div>
                  <div class="col-sm-10 col-10 mb-1">
                  <input type="text" class="form-control shadow-sm" name="overall_budget" id="tl" placeholder="TL Head Count"  style="display:none"/>
                  
                </div>
              
                </div>
                <div class="col-sm-6" style="padding-top: 2%;" >


                  <div class="col-sm-10 col-10 mb-1">
                  
                    <div class="col-lg-6 col-10 mb-1">
                      <input type="text" class="form-control shadow-sm" name="minimum_salary1" id="csrminimum_salary1" placeholder="CSR Minimum Salary" style="display:none" />
                  </div>
                  <div class="col-lg-6 col-6 mb-1">
                  
                    <input type="text" class="form-control shadow-sm"  name="csrmaximum_salary1" id="csrmaximum_salary1" placeholder="CSR Maximum Salary" style="display:none"/>
                  </div>
                  </div>
         
                <div class="col-sm-10 col-10 mb-1">

                  <div class="col-lg-6 col-10 mb-1">
                  <input type="text" class="form-control shadow-sm"  name="minimum_salary2" id="supminimum_salary2" placeholder="Sup Minimum Salary" style="display:none" />
                </div>
                <div class="col-lg-6 col-6 mb-1">
                
                  <input type="text" class="form-control shadow-sm"  name="maximum_salary2" id="supmaximum_salary2" placeholder="Sup Maximum Salary" style="display:none"/>
                </div>
                </div>
                <div class="col-sm-10 col-10 mb-1">
                  <div class="col-lg-6 col-10 mb-1">
                  <input type="text" class="form-control shadow-sm"  name="minimum_salary3" id="tlminimum_salary3" placeholder="TL Minimum Salary" style="display:none"/>
               </div>
               <div class="col-lg-6 col-10 mb-1">
                  <input type="text" class="form-control shadow-sm"   name="maximum_salary3" id="tlmaximum_salary3"   placeholder="TL Maximum Salary" style="display:none" />
                </div>
                </div>
                <div class="col-sm-10 col-10 mb-1">
                  <div class="col-lg-6 col-10 mb-1">
                  <input type="text" class="form-control shadow-sm"  name="minimum_salary3" id="astmgrminimum_salary3" placeholder="Assistant Manager Minimum Salary" style="display:none" />
                  </div>
                  <div class="col-lg-6 col-10 mb-1">
                  <input type="text" class="form-control shadow-sm"   name="maximum_salary3" id="astmgrmaximum_salary3"   placeholder="Assistant Manager Maximum Salary" style="display:none" />
                </div>
                </div>
                <div class="col-sm-10 col-10 mb-1">
                  <div class="col-lg-6 col-10 mb-1">
                  <input type="text" class="form-control shadow-sm"  name="minimum_salary3" id="mgrminimum_salary3" placeholder=" Manager Minimum Salary" style="display:none" />
               </div>
               <div class="col-lg-6 col-10 mb-1">
                  <input type="text" class="form-control shadow-sm"   name="maximum_salary3" id="mgrmaximum_salary3"   placeholder=" Manager Maximum Salary" style="display:none" />
                  </div>
                </div>
                <div class="col-sm-10 col-10 mb-1">
                  <div class="col-lg-6 col-10 mb-1">
                  <input type="text" class="form-control shadow-sm"  name="minimum_salary3" id="MISminimum_salary3" placeholder=" MIS  Minimum Salary" style="display:none" />
                 </div>
                 <div class="col-lg-6 col-10 mb-1">
                  <input type="text" class="form-control shadow-sm"   name="maximum_salary3" id="MISmaximum_salary3"   placeholder=" MIS Maximum Salary" style="display:none" />
                </div>
                </div>
                </div>
                </div>
                    
                    </div>  
                  </div>   
                  </div>   
                                           
                    
                    <div class="row justify-content-evenly mt-4" style="padding-top: 4%;padding-left:15%" >                    
                    
                      
                </div>

                      

                </div>    

                    <div class="my-3 text-center"style="padding-top: 3%">
                      <button type="submit" onclick="submit()" class="btn btn-primary col-4" style="background-color:#24a0ed">Submit</button>
                    </div>


                
                
            </div>
        </div>
        <script>
           $(document).ready(function(){
              $('.multi_select3').selectpicker();  
          })

          function checkval()
                            {
                              debugger;
                              var checked3 = document.querySelectorAll('#jobroles :checked');
                              var selected3 = [...checked3].map(option => option.value);
                              
                             
                               

                                for (var j=0;j<selected3.length;j++)
                                {

                                

                                if(selected3[j]=="Customer Service Representative")
                                {
                                  document.getElementById('CSR').style.display='block'
                                  document.getElementById('regular').style.display='block'
                                  document.getElementById('buffer').style.display='block'
                                  document.getElementById('csrminimum_salary1').style.display='block'
                                  document.getElementById('csrmaximum_salary1').style.display='block'
                                  
                                   
                                }
                  
                                else if(selected3[j]=="Team Leader")
                                {
                                  document.getElementById('tl').style.display='block'
                                  document.getElementById('tlminimum_salary3').style.display='block'
                                  document.getElementById('tlmaximum_salary3').style.display='block'
                                  
                  
                                }
                  
                                else if (selected3[j]=="Supervisor")
                                {
                                  document.getElementById('Supervisor').style.display='block'
                                  document.getElementById('supminimum_salary2').style.display='block'
                                  document.getElementById('supmaximum_salary2').style.display='block'
                                  
                                 
                                }
                                else if (selected3[j]=="Assistant Operations Manager")
                                {
                                  document.getElementById('astmgr').style.display='block'
                                  document.getElementById('astmgrminimum_salary3').style.display='block'
                                  document.getElementById('astmgrmaximum_salary3').style.display='block'
                                  
                                 
                                }
                                else if (selected3[j]=="Operations Manager")
                                {
                                  document.getElementById('mgr').style.display='block'
                                  document.getElementById('mgrminimum_salary3').style.display='block'
                                  document.getElementById('mgrmaximum_salary3').style.display='block'
                                  
                                 
                                }
                                else if (selected3[j]=="MIS")
                                {
                                  document.getElementById('mis').style.display='block'
                                  document.getElementById('MISminimum_salary3').style.display='block'
                                  document.getElementById('MISmaximum_salary3').style.display='block'
                                  
                                }
                                
                                else
                                {
                                  document.getElementById('CSR').style.display='none'
                                  document.getElementById('regular').style.display='none'
                                  document.getElementById('buffer').style.display='none'
                                  document.getElementById('csrminimum_salary1').style.display='none'
                                  document.getElementById('csrmaximum_salary1').style.display='none'
                                  document.getElementById('tl').style.display='none'
                                  document.getElementById('tlminimum_salary3').style.display='none'
                                  document.getElementById('tlmaximum_salary3').style.display='none'
                                  document.getElementById('Supervisor').style.display='none'
                                  document.getElementById('supminimum_salary2').style.display='none'
                                  document.getElementById('supmaximum_salary2').style.display='none'
                                  document.getElementById('astmgr').style.display='none'
                                  document.getElementById('astmgrminimum_salary3').style.display='none'
                                  document.getElementById('astmgrmaximum_salary3').style.display='none'
                                  document.getElementById('mgr').style.display='none'
                                  document.getElementById('mgrminimum_salary3').style.display='none'
                                  document.getElementById('mgrmaximum_salary3').style.display='none'
                                  document.getElementById('mis').style.display='none'
                                  document.getElementById('MISminimum_salary3').style.display='none'
                                  document.getElementById('MISmaximum_salary3').style.display='none'
                                  
                                }
                              }
                            }
        
          
            function checksalary()
            {
                  
                  var totalcsr=document.getElementById('CSR').value;
                  var totalsup=document.getElementById('Supervisor').value;
                  var totaltl=document.getElementById('tl').value;
                  var carsal=document.getElementById('maximum_salary1').value;
                  var supsal=document.getElementById('maximum_salary2').value;
                  var tlsal=document.getElementById('maximum_salary3').value;
                  var totalcsradd=totalcsr*carsal
                  var totalsupadd=totalsup*supsal
                  var totaltladd=totaltl*tlsal
                  var newcsrsal= totalcsradd*12
                  var newsupsal=totalsupadd*12
                  var newtlsal=totaltladd*12
                  var totalsal=newcsrsal+newsupsal+newtlsal
                  //alert(totalsal);
                  document.getElementById("salary_budget").value = totalsal;
                  var newtotalsalarybudject = document.getElementById('salary_budget').value;
                  if(newtotalsalarybudject<totalsal)
                  {
                    alert('over all salary budget is exceed please change the salary')
                    document.getElementById('maximum_salary1').value=""
                    document.getElementById('maximum_salary2').value=""
                    document.getElementById('maximum_salary3').value=""
                  

                  }

            }




         


            


    
        </script>
        
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
       
<script>




  function submit()  
          {
           
 debugger;
 /* var totalcsr=document.getElementById('CSR').value;
                  var totalsup=document.getElementById('Supervisor').value;
                  var totaltl=document.getElementById('tl').value;
                  var carsal=document.getElementById('csrmaximum_salary1').value;
                  var supsal=document.getElementById('tlmaximum_salary3').value;
                  var tlsal=document.getElementById('maximum_salary3').value;
                  var totalcsradd=totalcsr*carsal
                  var totalsupadd=totalsup*supsal
                  var totaltladd=totaltl*tlsal
                  var newcsrsal= totalcsradd*12
                  var newsupsal=totalsupadd*12
                  var newtlsal=totaltladd*12
                  var totalsal=newcsrsal+newsupsal+newtlsal
                  //alert(totalsal);
                  document.getElementById("salary_budget").value = totalsal;
                  var newtotalsalarybudject = document.getElementById('salary_budget').value;
                  if(newtotalsalarybudject<totalsal)
                  {
                    alert('over all salary budget is exceed please change the salary')
                    document.getElementById('maximum_salary1').value=""
                    document.getElementById('maximum_salary2').value=""
                    document.getElementById('maximum_salary3').value=""
                  

                  } */

 var pname=document.getElementById('process_name').value;
 var opsmgr=document.getElementById('ops_manager').value;
 var targetdate=document.getElementById('target_date').value;
 var salarybudget=document.getElementById('salary_budget').value;
 var opsmgr1=document.getElementById('CSR').value;
 var regular=document.getElementById('regular').value;
 var buffer=document.getElementById('buffer').value;
 var opsmgr2=document.getElementById('Supervisor').value;
 var opsmgr3=document.getElementById('tl').value;
 var minsal1=document.getElementById('csrminimum_salary1').value;
 var maxsal1=document.getElementById('csrmaximum_salary1').value;
 var minsal2=document.getElementById('tlminimum_salary3').value;
 var maxsal2=document.getElementById('tlmaximum_salary3').value;
 var minsal3=document.getElementById('supminimum_salary2').value;
 var maxsal3=document.getElementById('supmaximum_salary2').value;
 var minsal4=document.getElementById('astmgrminimum_salary3').value;
 var maxsal4=document.getElementById('astmgrmaximum_salary3').value;
 var minsal5=document.getElementById('mgrminimum_salary3').value;
 var maxsal5=document.getElementById('mgrmaximum_salary3').value;
 var minsal6=document.getElementById('MISminimum_salary3').value;
 var maxsal6=document.getElementById('MISmaximum_salary3').value;
 var astmgr=document.getElementById('astmgr').value;
 var mgr=document.getElementById('mgr').value;
 var mis=document.getElementById('mis').value;

var newval=(opsmgr*maxsal1)*12
var newval2=(opsmgr2*maxsal2)*12
var newval3=(opsmgr3*maxsal3)*12
var newval4=(astmgr*maxsal4)*12
var newval5=(mgr*maxsal5)*12
var newval6=(mis*maxsal6)*12
var newvals=newval+newval2+newval3+newval4+newval5+newval6
alert(newvals)
document.getElementById("salary_budget").innerHTML = newvals;

  /*  if (/* document.getElementById('client_name').value =='' || document.getElementById('process_name').value =='' ||
       document.getElementById('ops_manager').value =='' || document.getElementById('target_date').value =='' ||
      /* document.getElementById('salary_budget').value =='' || 
       document.getElementById('CSR').value =='' || document.getElementById('Supervisor').value =='' ||
       document.getElementById('tl').value =='' || document.getElementById('minimum_salary1').value =='' ||
       document.getElementById('maximum_salary1').value =='' || document.getElementById('minimum_salary2').value =='' ||
       document.getElementById('maximum_salary2').value =='' || document.getElementById('minimum_salary3').value =='' ||
       document.getElementById('maximum_salary3').value =='' )

         {
             alert('Please Fill All Fields');
             window.location='process'
         } */
         


         salarybudget=newvals
 $.ajax({
           type: 'GET',
           url: '/newprocess',
     
       contentType: 'application/json;charset=UTF-8',
           data: {
           
           'pname': pname,
           'opsmgr': opsmgr,
           'targetdate': targetdate,
           'salarybudget': salarybudget,
           'opsmgr1':opsmgr1,
           'opsmgr2':opsmgr2,
           'opsmgr3':opsmgr3,
           'regular':regular,
           'buffer':buffer,
           'minsal1':minsal1,
           'maxsal1':maxsal1,
           'minsal2':minsal2,
           'maxsal2':maxsal2,
           'minsal3':minsal3,
           'maxsal3':maxsal3,
           'astmgr':astmgr,
           'mgr':mgr,
           'mis':mis,
           'minsal4':minsal4,
           'maxsal4':maxsal4,
           'minsal5':minsal5,
           'maxsal5':maxsal5,
           'minsal6':minsal6,
           'maxsal6':maxsal6
       },
           
       dataType:"json",
           success: function(data) {
      alert('Process created  Successfully');
      
       window.location='process';
             // window.location='register';
           },
       });
 
     }
    
	
	
	
var today = new Date();
var dd = today.getDate();
dd=parseInt(dd);
dd=dd+1;
var mm = today.getMonth() + 1; //January is 0!
var yyyy = today.getFullYear();

if (dd < 10) {
   dd = '0' + dd;
}

if (mm < 10) {
   mm = '0' + mm;
} 
    
today = yyyy + '-' + mm + '-' + dd;
document.getElementById("target_date").setAttribute("min", today);
</script>
    </body>
</html>
