<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Process Approval Page</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>

        
<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>



        <style>
            #wrapper {
  overflow-x: hidden;
}

#sidebar-wrapper {
  min-height: 100vh;
  margin-left: -16rem;
  transition: margin 0.25s ease-out;
}

#sidebar-wrapper .sidebar-heading {
  padding: 0.875rem 1.25rem;
  font-size: 1.2rem;
}

#sidebar-wrapper .list-group {
  width: 16rem;
}

#page-content-wrapper {
  min-width: 100vw;
}

body.sb-sidenav-toggled #wrapper #sidebar-wrapper {
  margin-left: 0;
}

@media (min-width: 768px) {
  #sidebar-wrapper {
    margin-left: 0;
  }

  #page-content-wrapper {
    min-width: 0;
    width: 100%;
  }

  body.sb-sidenav-toggled #wrapper #sidebar-wrapper {
    margin-left: -16rem;
  }
}


                    
                    
.active, .btn:hover {
        background-color: rgb(18, 19, 18);
        color: white;
                    }

.subheader{
	color:#1515a0;
	font-weight:bolder;
}


        </style>
    </head>
    <body>
        <div class="d-flex" id="wrapper">
            <div id="page-content-wrapper">
                <!-- Top navigation-->
                <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom shadow-sm">
                  <div class="container-fluid">
                      
                     <div id="myDIV" class="collapse navbar-collapse">

            <ul class="navbar-nav mb-2 mb-md-0">
              <li class="nav-item">
                <a href='hrheadpage' class="nav-link active"><i class="fa fa-home" aria-hidden="true">Home </i></a>
              </li>
              <li class="nav-item">
                <a href="process" class="nav-link">&nbsp;&nbsp;&nbsp;<i class="fa fa-tasks" aria-hidden="true">New Process</i></a>
              </li>
              <li class="nav-item">
                <a href="rejprocesslist" class="nav-link">&nbsp;&nbsp;&nbsp;<i class="fa fa-tasks" aria-hidden="true">Rejected Process</i></a>
              </li>
              <li class="nav-item">
                <a href="login" class="nav-link">&nbsp;&nbsp;&nbsp;<i class="fa fa-sign-out"
                    aria-hidden="true">Logout</i></a>
              </li>
            </ul>
            
          </div>
                  </div>
              </nav>
                <!-- Page content-->
            </div>
            </div>
                <div class="container-fluid">
                    
                    <h4 class="mt-4 text-center justify-content-around font-weight-bold">Process Detail View</h4>
                    <hr>
                    <div class="row justify-content-evenly mt-4">
                        
                      
                        
                      </div>  

                    <div class="row justify-content-around mt-2" style="padding-left:20%">
                     
                     
                   
                    
                   

                </div>
                
            </div>
        </div>
       



        <div class="row justify-content-around mt-2" style="padding-left:15%">
                     
          <div class="col-lg-6">
          <div class="col">
              <h5 class="xs-2 sm-2 text-center font-weight-bold">Process Information</h5>
              {% for item in data %}
             

              <div class="row">
                <div class="col-lg-6 col-sm-12 mb-1">
					<div class="col-lg-12 col-12 mb-1">
						<label class="subheader">Process ID</label>
					</div>
					<div class="col-lg-12 col-12 mb-1">  
						<input type="text" readonly value="{{item[0]}}" id="pid" name="pid" />
					</div>
				</div>
				
                <div class="col-lg-6 col-sm-12 mb-1">
					<div class="col-lg-12 col-12 mb-1">
						<label class="subheader">Process Name</label>
					</div>
					<div class="col-lg-12 col-12 mb-1">  
						<input type="text" readonly value="{{item[1]}}" id="pname" name="pname" />
					</div>
				</div>
              </div>
            


			<div class="row">
                <div class="col-lg-6 col-sm-12 mb-1">
					<div class="col-lg-12 col-12 mb-1">
						<label class="subheader">OPS Manager</label>
					</div>
					<div class="col-lg-12 col-12 mb-1">  
						<input type="text" readonly value="{{item[2]}}" id="opsmgr" name="opsmgr" />
					</div>
				</div>
				
                <div class="col-lg-6 col-sm-12 mb-1">
					<div class="col-lg-12 col-12 mb-1">
						<label class="subheader">Target Date</label>
					</div>
					<div class="col-lg-12 col-12 mb-1">  
						<input type="text" readonly value="{{item[3]}}" id="tdate" name="tdate" />
					</div>
				</div>
            </div>
			
            
        </div>
      </div>
        <div class="col-lg-6">
                              
            <h5 class="xs-2 sm-2 text-left font-weight-bold">Budget Information</h5>
           
            <div class="row">
                <div class="col-lg-6 col-sm-12 mb-1">
					<div class="col-lg-12 col-12 mb-1">
						<label class="subheader">Salary Budget</label>
					</div>
					<div class="col-lg-12 col-12 mb-1">  
						<input type="text" readonly value="{{item[4]}}" id="sbudget" name="sbudget" />
					</div>
				</div>
				
            </div>
        </div>    
</div>




          <div class="justify-content-around mt-2"  style="padding-top:5%;padding-left:15%;">

           <div class="row">
            <div class="col-lg-4" >
            <div class="col">
              <h5 class="xs-2 sm-2 text-left font-weight-bold" >Resource Requirement Information</h5>
              <div class="col-sm-10 col-10 mb-1">
                <div class="row" >
               <div class="col-lg-12 col-12 mb-1">
                  <label for="client_name" class="form-label"> Total Customer Service Rep</label>
                 </div>
                 <div class="col-lg-12 col-12 mb-1">
                  <input type="text"  value="{{item[5]}}" id="tot_csr" name="tot_csr" />  
                </div>
                </div>
              </div>
              <div class="col-sm-10 col-10 mb-1">
                <div class="row" >
                  <div class="col-lg-12 col-12 mb-1">
                     <label for="client_name" class="form-label"> Total Regular</label>
                    </div>
                    <div class="col-lg-12 col-12 mb-1">
                  <input type="text"  value="{{item[6]}}" id="regular" name="regular" />  
                   </div>
                   </div>
              </div>   
              <div class="col-sm-10 col-10 mb-1">
                
                <div class="row" >
                  <div class="col-lg-12 col-12 mb-1">
                     <label for="client_name" class="form-label"> Total Buffer</label>
                    </div>
                    <div class="col-lg-12 col-12 mb-1">
                  <input type="text"  value="{{item[7]}}" id="buffer" name="buffer" />  
                   </div>
                   </div>
              </div> 
           
          <div class="col-sm-10 col-10 mb-1">
            <div class="row">
            <div class="col-lg-12 col-12 mb-1">
              <label for="client_name" class="form-label">Total Supervisor</label>
             </div>
             <div class="col-lg-12 col-12 mb-1"> 
              <input type="text"  value="{{item[10]}}" id="tot_sup" name="tot_sup" /> 
            </div>
            </div>
          </div>
                  
          <div class="col-sm-10 col-10 mb-1">
            <div class="row">
              <div class="col-lg-12 col-12 mb-1">
                <label for="client_name" class="form-label">Total Team Leader</label>
               </div>
               <div class="col-lg-12 col-12 mb-1">
              <input type="text"  value="{{item[13]}}" id="tot_tl" name="tot_tl" /> 
              </div>
              </div>
            
                  
          </div> 
          <div class="col-sm-10 col-10 mb-1">
            <div class="row">
              <div class="col-lg-12 col-12 mb-1">
                <label for="client_name" class="form-label">Total Manager</label>
               </div>
               <div class="col-lg-12 col-12 mb-1">
              <input type="text"  value="{{item[16]}}" id="tot_mgr" name="tot_mgr" /> 
              </div>
            </div>
          </div> 
          <div class="col-sm-10 col-10 mb-1">
            <div class="row">
              <div class="col-lg-12 col-12 mb-1">
                <label for="client_name" class="form-label">Total Assistant Manager</label>
               </div>
               <div class="col-lg-12 col-12 mb-1">
              <input type="text"  value="{{item[19]}}" id="tot_amgr" name="tot_amgr" />  
              </div>
            </div>
            
          </div> 
          <div class="col-sm-10 col-10 mb-1">
            <div class="row">
              <div class="col-lg-12 col-12 mb-1">
                <label for="client_name" class="form-label">Total  MIS</label>
               </div>
               <div class="col-lg-12 col-12 mb-1">
              <input type="text"  value="{{item[22]}}" id="tot_mis" name="tot_mis" />  
              </div>
            </div>
          
          </div> 

          
        </div>
      </div>
          <div class="col-lg-8" >
            <div class="row">
              <h5 class="xs-2 sm-2 text-left">Salary Range Setup</h5>
              <div class="row" style="padding-top:5px;">
              <div class="col-sm-4 col-10 mb-1" >
                <div class="row">
                  <div class="col-lg-8 col-10 mb-1">
                    <label for="client_name" class="form-label"> CSR Minimum Salary</label>
                   </div>
                   <div class="col-lg-4 col-10 mb-1">
					<input type="text"  value="{{item[8]}}" id="csrminsal" name="csrminsal" class="col-lg-12" />  
                  </div>
                </div>
               
              </div>                                      
              <div class="col-sm-4 col-10 mb-1">
                <div class="row">
                  <div class="col-lg-8 col-10 mb-1">
                    <label for="client_name" class="form-label">CSR Maximum Salary</label>
                   </div>
                   <div class="col-lg-4 col-10 mb-1">
					<input type="text"  value="{{item[9]}}" id="csrmaxsal" name="csrmaxsal" class="col-lg-12" />   
                  </div>
                </div>
                
              </div>
            </div>  
            </div> 
            <div class="row" style="padding-top: 10%;" >
              <div class="col-sm-4 col-10 mb-1">
                <div class="row">
                  <div class="col-lg-8 col-10 mb-1">
                    <label for="client_name" class="form-label">Sup. Minimum Salary</label>
                   </div>
                   <div class="col-lg-4 col-10 mb-1">
					<input type="text"  value="{{item[11]}}" id="supminsal" name="supminsal" class="col-lg-12" />  
                  </div>
                </div>
                
              </div>                                      
              <div class="col-sm-4 col-10 mb-1">
                <div class="row">
                  <div class="col-lg-8 col-10 mb-1">
                    <label for="client_name" class="form-label">Sup. Maximum Salary</label>
                   </div>
                   <div class="col-lg-4 col-10 mb-1">
					<input type="text"  value="{{item[12]}}" id="supmaxsal" name="supmaxsal" class="col-lg-12" />    
                  </div>
                </div>
               
              </div>  
            </div>
            <div class="row" >
              <div class="col-sm-4 col-10 mb-1">
                <div class="row">
                  <div class="col-lg-8 col-10 mb-1">
                    <label for="client_name" class="form-label">TL Minimum Salary</label>
                   </div>
                   <div class="col-lg-4 col-10 mb-1">
					<input type="text"  value="{{item[14]}}" id="tlminsal" name="tlminsal" class="col-lg-12" /> 
                  </div>
                </div>
                
              </div>                                      
              <div class="col-sm-4 col-10 mb-1">
                <div class="row">
                  <div class="col-lg-8 col-10 mb-1">
                    <label for="client_name" class="form-label">TL Maximum Salary</label>
                   </div>
                   <div class="col-lg-4 col-10 mb-1">
					<input type="text"  value="{{item[15]}}" id="tlmaxsal" name="tlmaxsal" class="col-lg-12" /> 
                  </div>
                </div>
                
    
              </div>  
            </div>
            <div class="row" >
              <div class="col-sm-4 col-10 mb-1">
                <div class="row">
                  <div class="col-lg-8 col-10 mb-1">
                    <label for="client_name" class="form-label">Mgr. Minimum Salary</label>
                   </div>
                   <div class="col-lg-4 col-10 mb-1">
					<input type="text"  value="{{item[17]}}" id="mgrminsal" name="mgrminsal" class="col-lg-12" /> 
                  </div>
                </div>
                
                
              </div>                                      
              <div class="col-sm-4 col-10 mb-1">
                <div class="row">
                  <div class="col-lg-8 col-10 mb-1">
                    <label for="client_name" class="form-label">Mgr. Maximum Salary</label>
                   </div>
                   <div class="col-lg-4 col-10 mb-1">
					<input type="text"  value="{{item[18]}}" id="mgrmaxsal" name="mgrmaxsal" class="col-lg-12" /> 
                  </div>
                </div>
                
               
              </div>  
            </div>
            <div class="row" >
              <div class="col-sm-4 col-10 mb-1">

                <div class="row">
                  <div class="col-lg-8 col-10 mb-1">
                    <label for="client_name" class="form-label">Asst.Mgr. Minimum Salary</label>
                   </div>
                   <div class="col-lg-4 col-10 mb-1">
					<input type="text"  value="{{item[20]}}" id="amgrminsal" name="amgrminsal" class="col-lg-12" />   
                  </div>
                </div>
              
              </div>                                      
              <div class="col-sm-4 col-10 mb-1">
                <div class="row">
                  <div class="col-lg-8 col-10 mb-1">
                    <label for="client_name" class="form-label">Asst.Mgr.  Maximum Salary</label>
                   </div>
                   <div class="col-lg-4 col-10 mb-1">
					<input type="text"  value="{{item[21]}}" id="amgrmaxsal" name="amgrmaxsal" class="col-lg-12" />   
                  </div>
                </div>
               
              </div>  
            </div>
            <div class="row" >
              <div class="col-sm-4 col-10 mb-1">
                <div class="row">
                  <div class="col-lg-8 col-10 mb-1">
                    <label for="client_name" class="form-label">MIS Minimum Salary</label>
                   </div>
                   <div class="col-lg-4 col-10 mb-1">
					<input type="text"  value="{{item[23]}}" id="misminsal" name="misminsal" class="col-lg-12" />   
                  </div>
                </div>
              </div>                                      
              <div class="col-sm-4 col-10 mb-1">
                <div class="row">
                  <div class="col-lg-8 col-10 mb-1">
                    <label for="client_name" class="form-label">MIS Maximum Salary</label>
                   </div>
                   <div class="col-lg-4 col-10 mb-1">
					<input type="text"  value="{{item[24]}}" id="mismaxsal" name="mismaxsal" class="col-lg-12" />  
                  </div>
                </div>
                
              </div>  
            </div>
  </div>  
          </div>  
        </div>   
        </div>   
                                 
          
          <!-- <div class="row justify-content-evenly mt-4" style="padding-top: 4%;padding-left:15%" >                    
            <h5 class="xs-2 sm-2 text-left">Shared Resources</h5>
            
      </div>  
 -->
         <!--  <div class="row justify-content-around mt-2" style="padding-left:15%">
            <div class="col">
            <div class="col-sm-4 col-10 mb-1">
              <label for="training" class="form-label">Training</label>
              <input type="text" class="form-control shadow-sm"   name="training" id="training" value="{{item[18]}}" placeholder="TL Maximum Salary">
              
            </div>   
            <div class="col-sm-4 col-10 mb-1">
              <label for="quality" class="form-label">Quality</label>
              <input type="text" class="form-control shadow-sm"   name="quality" id="quality" value="{{item[19]}}" placeholder="TL Maximum Salary">
              
            </div> 
          </div> 
        </div> -->
          {% endfor %}                                   
          
          <div class="col-lg-10 col-10 mb-1 text-center" id="comments" style="padding-top: 4%;padding-left:15% ;display: none;" >  
            <h5 class="xs-2 sm-2 "> Reason</h5>
            <div class="col-lg-12 col-10 mb-1 text-center">
        
           <textarea rows="5" cols="70" id="content" placeholder="Please Write the Reason For Rejection Here..."></textarea>
          </div>
           <button class="btn btn-success" style="align-self: center;" id="btn_procreject">Submit</button>
      </div>  

      </div>    

          <div class="my-3 text-center"style="padding-top: 3%">
            <button class="btn btn-success col-4" id="btn_procresend" >Resend</button>
            <!--<button type="submit" onclick="reject()" class="btn btn-danger col-4" >Reject</button>-->
          </div>


      
      <!-- <div class="my-5"></div> -->
  </div>
</div>







<script>
  function reject()
  {
    document.getElementById('comments').style.display='block'
  }
                            
            function    submit()
            {           
                           
            var pid=document.getElementById('*spaM4').textContent
            var comments=document.getElementById('content').value;       
            $.ajax({
              type: 'GET',
              url: '/rejectprocess',
              
          contentType: 'application/json;charset=UTF-8',
              data: {
              
              'pid':pid,
              'comments':comments

          },
              
          dataType:"json",
              success: function(data) {
                alert("Rejected Successfully");
                  window.location='ceopage'
              },
               error: function(data) {
                 
              }
          }); 
      
        } 


  </script>
  <script>
    function approve()
    {
                            
    var pid=document.getElementById('*spaM4').textContent
    
    debugger;
    
             
              $.ajax({
                type: 'GET',
                url: '/approveprocess',
                
            contentType: 'application/json;charset=UTF-8',
                data: {
                
                'pid':pid
            },
                
            dataType:"json",
                success: function(data) {
                  alert("Approved Successfully");
                    window.location='ceopage'
                },
                 error: function(data) {
                   
                }
            }); 
       
          }
  
  
    </script>


        <script>
          function ageCalculator() {  
    var userinput = document.getElementById("DOB").value;  
    var dob = new Date(userinput);  
    if(userinput==null || userinput=='') {  
      document.getElementById("message").innerHTML = "**Choose a date please!";    
      return false;   
    } else {  
      
    //calculate month difference from current date in time  
    var month_diff = Date.now() - dob.getTime();  
      
    //convert the calculated difference in date format  
    var age_dt = new Date(month_diff);   
      
    //extract year from date      
    var year = age_dt.getUTCFullYear();  
      
    //now calculate the age of the user  
    var age = Math.abs(year - 1970);  
      
    //display the calculated age  
    return document.getElementById("result").innerHTML =    
             "Age is: " + age + " years. ";  
    }  
}  
        </script>
        
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script>
            window.addEventListener('DOMContentLoaded', event => {

// Toggle the side navigation
const sidebarToggle = document.body.querySelector('#sidebarToggle');
if (sidebarToggle) {
    
    if (localStorage.getItem('sb|sidebar-toggle') === 'true') {
        document.body.classList.toggle('sb-sidenav-toggled');
    }
    sidebarToggle.addEventListener('click', event => {
        event.preventDefault();
        document.body.classList.toggle('sb-sidenav-toggled');
        localStorage.setItem('sb|sidebar-toggle', document.body.classList.contains('sb-sidenav-toggled'));
    });
}

});
        </script>

<script>
  function submit()
  
          {


    
            var oberallbudgetofprocess=document.getElementById('overall_budget').value;
            var salarybudgetofprocess=document.getElementById('salary_budget').value;
            if(oberallbudgetofprocess<salarybudgetofprocess)
            {
              alert('please make sure that salary budget should be lesser than over all budget')
              document.getElementById('salary_budget').value=""
              
            }

            var carsal=document.getElementById('maximum_salary1').value;
            var supsal=document.getElementById('maximum_salary2').value;
            var tlsal=document.getElementById('maximum_salary3').value;
            var newcsrsal= carsal*12
            var newsupsal=supsal*12
            var newtlsal=tlsal*12
            var totalsal=newcsrsal+newsupsal+newtlsal
            alert(totalsal);
            var newtotalsalarybudject = document.getElementById('salary_budget').value;
            if(newtotalsalarybudject<totalsal)
            {
              alert('over all salary budget is exceed please change the salary')
              document.getElementById('maximum_salary1').value=""
              document.getElementById('maximum_salary2').value=""
              document.getElementById('maximum_salary3').value=""
            

            }
 debugger;
 var cname=document.getElementById('client_name').value;
 var pname=document.getElementById('process_name').value;
 var pid=document.getElementById('process_ID').value;
 var opsmgr=document.getElementById('ops_manager').value;
 var targetdate=document.getElementById('target_date').value;
 var overallbudget=document.getElementById('overall_budget').value;
 var salarybudget=document.getElementById('salary_budget').value;
 var totopsmgr=document.getElementById('CSR').value;
 var regular=document.getElementById('regular').value;
 var buffer=document.getElementById('buffer').value;
 var totSupervisor=document.getElementById('Supervisor').value;
 var totteamleder=document.getElementById('tl').value;
 var minsal1=document.getElementById('minimum_salary1').value;
 var maxsal1=document.getElementById('maximum_salary1').value;
 var minsal2=document.getElementById('minimum_salary2').value;
 var maxsal2=document.getElementById('maximum_salary2').value;
 var minsal3=document.getElementById('minimum_salary3').value;
 var maxsal3=document.getElementById('maximum_salary3').value;
 var training=document.getElementById('training').value;
 var quality=document.getElementById('quality').value;
 
   if (document.getElementById('client_name').value =='' && document.getElementById('process_name').value =='' &&
       document.getElementById('ops_manager').value =='' && document.getElementById('target_date').value =='' &&
       document.getElementById('overall_budget').value =='' && document.getElementById('salary_budget').value =='' &&
       document.getElementById('ops_manager1').value =='' && document.getElementById('ops_manager2').value =='' &&
       document.getElementById('ops_manager3').value =='' && document.getElementById('minimum_salary1').value =='' &&
       document.getElementById('maximum_salary1').value =='' && document.getElementById('minimum_salary2').value =='' &&
       document.getElementById('maximum_salary2').value =='' && document.getElementById('minimum_salary3').value =='' &&
       document.getElementById('maximum_salary3').value =='' && document.getElementById('training').value =='' &&
       document.getElementById('quality').value =='' )

         {
             alert('Please Fill All Fields');
             window.location='ceoprocesspage'
         }
         
 else{


 $.ajax({
           type: 'GET',
           url: '/updatenewprocess',
     
       contentType: 'application/json;charset=UTF-8',
           data: {
           'cname': cname,
           'pname': pname,
           'pid':pid,
           'opsmgr': opsmgr,
           'targetdate': targetdate,
           'overallbudget': overallbudget,
           'salarybudget': salarybudget,
           'totSupervisor':totSupervisor,
           'totteamleder':totteamleder,
           'totopsmgr':totopsmgr,
           'regular':regular,
           'buffer':buffer,
           'minsal1':minsal1,
           'maxsal1':maxsal1,
           'minsal2':minsal2,
           'maxsal2':maxsal2,
           'minsal3':minsal3,
           'maxsal3':maxsal3,
           'training':training,
           'quality':quality
     

       },
           
       dataType:"json",
           success: function(data) {
       //alert('Data saved Successfully');
      
       window.location='ceopage';
             // window.location='register';
           },
       });
 
     }
    }
</script>







<script src="/static/api/restapi.js"></script>
 
    </body>
</html>
